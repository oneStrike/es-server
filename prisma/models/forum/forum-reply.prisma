/// 论坛回复表 - 存储主题的回复内容，支持楼中楼回复
model ForumReply {
  /// 主键ID
  id            Int                 @id @default(autoincrement())
  /// 回复内容
  content       String
  /// 关联的主题ID
  topicId       Int                 @map("topic_id")
  /// 关联的用户ID
  userId        Int                 @map("user_id")
  /// 回复楼层（从1开始）
  floor         Int
  /// 回复的回复ID（楼中楼）
  replyToId     Int?                @map("reply_to_id")
  /// 是否隐藏（待审核）
  isHidden      Boolean             @default(false) @map("is_hidden")
  /// 审核状态（0=待审核, 1=已通过, 2=已拒绝）
  auditStatus   Int                 @default(0) @map("audit_status") @db.SmallInt
  /// 审核原因
  auditReason   String?             @map("audit_reason") @db.VarChar(500)
  /// 审核时间
  auditAt       DateTime?           @map("audit_at") @db.Timestamptz(6)
  /// 审核人ID
  auditBy       Int?                @map("audit_by")
  /// 点赞数
  likeCount     Int                 @default(0) @map("like_count")
  /// 创建时间
  createdAt     DateTime            @default(now()) @map("created_at") @db.Timestamptz(6)
  /// 更新时间
  updatedAt     DateTime            @updatedAt @map("updated_at") @db.Timestamptz(6)
  /// 软删除时间
  deletedAt     DateTime?           @map("deleted_at") @db.Timestamptz(6)
  /// 版本号（用于乐观锁）
  version       Int                 @default(0)
  replyTo       ForumReply?         @relation("ReplyTo", fields: [replyToId], references: [id])
  replies       ForumReply[]        @relation("ReplyTo")
  topic         ForumTopic          @relation(fields: [topicId], references: [id], onDelete: Cascade)
  user          ClientUser          @relation(fields: [userId], references: [id], onDelete: Cascade, map: "forum_reply_user_id_fkey")
  likes         ForumReplyLike[]
  notifications ForumNotification[] @relation("NotificationReply")

  @@index([topicId])
  @@index([userId])
  @@index([floor])
  @@index([replyToId])
  @@index([isHidden])
  @@index([auditStatus])
  @@index([likeCount])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([topicId, floor])
  @@index([topicId, createdAt])
  @@map("forum_reply")
}
