/// 论坛回复表 - 存储论坛主题的回复信息
model ForumReply {
  /// 主键ID
  id Int @id @default(autoincrement())

  /// 关联的主题ID
  topicId Int @map("topic_id")
  /// 关联的用户ID
  userId  Int @map("user_id")
  /// 回复目标ID（楼中楼）
  replyToId Int? @map("reply_to_id")

  /// 回复内容
  content String

  /// 点赞数
  likeCount Int @default(0) @map("like_count")

  /// 创建时间
  createdAt DateTime @default(now()) @map("created_at") @db.Timestamptz(6)
  /// 更新时间
  updatedAt DateTime @updatedAt @map("updated_at") @db.Timestamptz(6)
  /// 软删除时间
  deletedAt DateTime? @map("deleted_at") @db.Timestamptz(6)

  /// 关联主题
  topic    ForumTopic          @relation(fields: [topicId], references: [id], onDelete: Cascade)
  /// 关联用户
  user     AppUser             @relation(fields: [userId], references: [id])
  /// 回复目标
  replyTo  ForumReply?         @relation("ReplyTo", fields: [replyToId], references: [id])
  /// 被回复列表
  replies  ForumReply[]        @relation("ReplyTo")
  /// 点赞列表
  likes    ForumReplyLike[]
  /// 通知关联
  notifications ForumNotification[] @relation("NotificationReply")

  /// 主题索引
  @@index([topicId])
  /// 用户索引
  @@index([userId])
  /// 回复目标索引
  @@index([replyToId])
  /// 创建时间索引
  @@index([createdAt])
  /// 删除时间索引
  @@index([deletedAt])
  @@map("forum_reply")
}
