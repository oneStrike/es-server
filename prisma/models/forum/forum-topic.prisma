/// 论坛主题表 - 存储论坛主题信息，包括标题、内容、审核状态、统计数据等
model ForumTopic {
  /// 主键ID
  id                 Int                  @id @default(autoincrement())
  /// 主题标题
  title              String               @db.VarChar(200)
  /// 主题内容
  content            String
  /// 关联的板块ID
  sectionId          Int                  @map("section_id")
  /// 关联的论坛资料ID
  profileId          Int                  @map("profile_id")
  /// 是否置顶
  isPinned           Boolean              @default(false) @map("is_pinned")
  /// 是否加精
  isFeatured         Boolean              @default(false) @map("is_featured")
  /// 是否锁定
  isLocked           Boolean              @default(false) @map("is_locked")
  /// 是否隐藏（待审核）
  isHidden           Boolean              @default(false) @map("is_hidden")
  /// 审核状态（0=待审核, 1=已通过, 2=已拒绝）
  auditStatus        Int                  @default(1) @map("audit_status") @db.SmallInt
  /// 审核原因
  auditReason        String?              @map("audit_reason") @db.VarChar(500)
  /// 审核时间
  auditAt            DateTime?            @map("audit_at") @db.Timestamptz(6)
  /// 审核人ID
  auditById          Int?                 @map("audit_by_id")
  /// 审核人角色（0=版主, 1=管理员）
  auditRole          Int?                 @map("audit_role") @db.SmallInt
  /// 浏览量
  viewCount          Int                  @default(0) @map("view_count")
  /// 回复数
  replyCount         Int                  @default(0) @map("reply_count")
  /// 点赞数
  likeCount          Int                  @default(0) @map("like_count")
  /// 收藏数
  favoriteCount      Int                  @default(0) @map("favorite_count")
  /// 最后回复时间
  lastReplyAt        DateTime?            @map("last_reply_at") @db.Timestamptz(6)
  /// 最后回复用户资料ID
  lastReplyProfileId Int?                 @map("last_reply_profile_id")
  /// 创建时间
  createdAt          DateTime             @default(now()) @map("created_at") @db.Timestamptz(6)
  /// 更新时间
  updatedAt          DateTime             @updatedAt @map("updated_at") @db.Timestamptz(6)
  /// 软删除时间
  deletedAt          DateTime?            @map("deleted_at") @db.Timestamptz(6)
  /// 版本号（用于乐观锁）
  version            Int                  @default(0)
  /// 敏感词命中记录
  sensitiveWordHits  Json?                @map("sensitive_word_hits") @db.JsonB
  replies            ForumReply[]
  lastSections       ForumSection[]       @relation("LastTopic")
  profile            ForumProfile         @relation(fields: [profileId], references: [id], map: "forum_topic_forum_profile_id_fkey")
  lastReplyProfile   ForumProfile?        @relation("LastReplyUser", fields: [lastReplyProfileId], references: [id])
  section            ForumSection         @relation(fields: [sectionId], references: [id], onDelete: Cascade)
  favorites          ForumTopicFavorite[]
  likes              ForumTopicLike[]
  topicTags          ForumTopicTag[]
  tags               ForumTag[]           @relation("TopicTags")
  notifications      ForumNotification[]  @relation("NotificationTopic")
  views              ForumView[]

  @@index([sectionId])
  @@index([profileId])
  @@index([isPinned, createdAt])
  @@index([isFeatured, createdAt])
  @@index([isLocked])
  @@index([isHidden])
  @@index([auditStatus])
  @@index([viewCount])
  @@index([replyCount])
  @@index([likeCount])
  @@index([favoriteCount])
  @@index([lastReplyAt])
  @@index([createdAt])
  @@index([updatedAt])
  @@index([deletedAt])
  @@index([sectionId, isPinned, createdAt])
  @@index([sectionId, isFeatured, createdAt])
  @@map("forum_topic")
}
