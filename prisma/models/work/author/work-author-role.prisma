/// 作者角色关联表（多对多）
model WorkAuthorRole {
  /// 主键ID
  id         Int      @id @default(autoincrement())
  /// 作者ID
  authorId   Int      @map("author_id")
  /// 角色类型ID
  roleTypeId Int      @map("role_type_id")
  /// 是否为主要角色（用于标识作者的主要职业）
  isPrimary  Boolean  @default(false) @map("is_primary")
  /// 创建时间
  createdAt  DateTime @default(now()) @map("created_at") @db.Timestamptz
  /// 更新时间
  updatedAt  DateTime @updatedAt @map("updated_at") @db.Timestamptz

  // 关联关系
  author   WorkAuthor         @relation(fields: [authorId], references: [id], onDelete: Cascade)
  roleType WorkAuthorRoleType @relation(fields: [roleTypeId], references: [id], onDelete: Restrict)

  /// 复合唯一索引（防止重复关联）
  @@unique([authorId, roleTypeId])
  /// 索引优化
  @@index([authorId]) // 按作者查询角色
  @@index([roleTypeId]) // 按角色类型查询作者
  @@index([isPrimary]) // 查询主要角色
  @@map("work_author_role")
}
