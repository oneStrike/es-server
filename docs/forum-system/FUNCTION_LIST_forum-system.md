# 论坛系统功能清单

## 功能模块概览

| 模块 | 功能数 | 优先级 | 状态 |
|------|--------|--------|------|
| 用户管理 | 12 | P0 | 待开发 |
| 版块管理 | 8 | P0 | 待开发 |
| 帖子管理 | 15 | P0 | 待开发 |
| 评论管理 | 10 | P0 | 待开发 |
| 权限管理 | 8 | P0 | 待开发 |
| 内容审核 | 7 | P1 | 待开发 |
| 积分系统 | 9 | P1 | 待开发 |
| 徽章系统 | 6 | P2 | 待开发 |
| 通知系统 | 8 | P1 | 待开发 |
| 搜索功能 | 6 | P1 | 待开发 |
| 数据统计 | 7 | P2 | 待开发 |
| 安全防护 | 8 | P0 | 待开发 |
| 系统配置 | 5 | P1 | 待开发 |
| **总计** | **109** | - | - |

---

## 一、用户管理模块 (P0)

### 1.1 用户基础功能
- [ ] **用户注册**
  - 支持用户名/邮箱注册
  - 密码强度验证
  - 验证码验证
  - 用户协议确认

- [ ] **用户登录**
  - 用户名/邮箱登录
  - JWT Token认证
  - 记住登录状态
  - 登录失败限制

- [ ] **用户信息管理**
  - 修改昵称
  - 修改头像
  - 修改个人简介
  - 修改签名

- [ ] **用户资料展示**
  - 用户主页
  - 用户头像、昵称、等级
  - 用户徽章展示
  - 用户统计数据（发帖数、评论数、积分）

### 1.2 用户扩展功能
- [ ] **用户等级系统**
  - 等级规则配置
  - 等级自动升级
  - 等级特权配置
  - 等级展示

- [ ] **用户状态管理**
  - 用户封禁/解封
  - 用户禁言
  - 用户标记（优质用户、活跃用户等）
  - 用户状态查询

- [ ] **用户关注系统**
  - 关注用户
  - 取消关注
  - 关注列表
  - 粉丝列表

- [ ] **用户黑名单**
  - 添加黑名单
  - 移除黑名单
  - 黑名单列表
  - 黑名单用户内容过滤

### 1.3 用户行为记录
- [ ] **用户行为日志**
  - 登录日志
  - 操作日志
  - IP记录
  - 设备信息记录

- [ ] **用户活跃度统计**
  - 日活跃用户
  - 月活跃用户
  - 用户留存率
  - 用户活跃度排行

- [ ] **用户积分记录**
  - 积分获取记录
  - 积分消费记录
  - 积分流水查询
  - 积分排行榜

- [ ] **用户违规记录**
  - 违规类型记录
  - 违规次数统计
  - 违规处罚记录
  - 违规历史查询

---

## 二、版块管理模块 (P0)

### 2.1 版块基础功能
- [ ] **版块创建**
  - 版块名称
  - 版块描述
  - 版块图标
  - 版块排序

- [ ] **版块编辑**
  - 修改版块信息
  - 版块状态启用/禁用
  - 版块权限配置
  - 版块排序调整

- [ ] **版块删除**
  - 软删除版块
  - 版块内容迁移
  - 版块删除确认
  - 删除权限控制

- [ ] **版块查询**
  - 版块列表
  - 版块详情
  - 版块搜索
  - 版块层级查询

### 2.2 版块扩展功能
- [ ] **多级版块**
  - 父子版块关系
  - 版块层级展示
  - 版块路径导航
  - 版块权限继承

- [ ] **版块权限**
  - 发帖权限
  - 回复权限
  - 查看权限
  - 版主权限

- [ ] **版块统计**
  - 版块帖子数
  - 版块评论数
  - 版块活跃度
  - 版块热度排行

- [ ] **版块管理**
  - 版主任命
  - 版主权限配置
  - 版主操作日志
  - 版主管理界面

---

## 三、帖子管理模块 (P0)

### 3.1 帖子基础功能
- [ ] **发帖功能**
  - 帖子标题
  - 帖子内容（富文本）
  - 选择版块
  - 添加标签
  - 上传图片/附件

- [ ] **帖子编辑**
  - 修改帖子内容
  - 修改帖子标题
  - 修改版块
  - 修改标签

- [ ] **帖子删除**
  - 软删除帖子
  - 删除权限控制
  - 删除确认
  - 删除记录

- [ ] **帖子查询**
  - 帖子列表（分页）
  - 帖子详情
  - 帖子搜索
  - 帖子筛选

### 3.2 帖子状态管理
- [ ] **帖子状态**
  - 草稿状态
  - 发布状态
  - 审核状态
  - 封禁状态

- [ ] **帖子标记**
  - 置顶帖子
  - 精华帖子
  - 热门帖子
  - 新帖标记

- [ ] **帖子排序**
  - 按发布时间
  - 按回复时间
  - 按热度
  - 按精华

- [ ] **帖子浏览**
  - 浏览量统计
  - 最近浏览
  - 浏览历史
  - 推荐帖子

### 3.3 帖子互动功能
- [ ] **帖子点赞**
  - 点赞/取消点赞
  - 点赞数统计
  - 点赞用户列表
  - 点赞通知

- [ ] **帖子收藏**
  - 收藏/取消收藏
  - 收藏夹管理
  - 收藏列表
  - 收藏统计

- [ ] **帖子分享**
  - 分享链接生成
  - 分享统计
  - 分享记录
  - 分享奖励

- [ ] **帖子举报**
  - 举报原因
  - 举报类型
  - 举报记录
  - 举报处理

### 3.4 帖子高级功能
- [ ] **帖子附件**
  - 上传附件
  - 附件管理
  - 附件下载
  - 附件权限

- [ ] **帖子图片**
  - 图片上传
  - 图片压缩
  - 图片水印
  - 图片CDN

- [ ] **帖子标签**
  - 标签创建
  - 标签管理
  - 标签搜索
  - 热门标签

- [ ] **帖子引用**
  - 引用帖子
  - 引用评论
  - 引用展示
  - 引用统计

---

## 四、评论管理模块 (P0)

### 4.1 评论基础功能
- [ ] **评论发布**
  - 评论内容
  - 回复评论
  - 引用回复
  - 表情支持

- [ ] **评论编辑**
  - 修改评论内容
  - 编辑时间限制
  - 编辑记录
  - 编辑权限

- [ ] **评论删除**
  - 删除评论
  - 删除权限
  - 删除确认
  - 删除记录

- [ ] **评论查询**
  - 评论列表
  - 评论详情
  - 评论搜索
  - 评论筛选

### 4.2 评论互动功能
- [ ] **评论点赞**
  - 点赞/取消点赞
  - 点赞数统计
  - 点赞用户列表
  - 点赞通知

- [ ] **评论回复**
  - 回复评论
  - 多级回复
  - 回复通知
  - 回复统计

- [ ] **评论举报**
  - 举报评论
  - 举报原因
  - 举报记录
  - 举报处理

- [ ] **评论管理**
  - 评论置顶
  - 评论加精
  - 评论折叠
  - 评论排序

### 4.3 评论高级功能
- [ ] **评论楼层**
  - 楼层号生成
  - 楼层跳转
  - 楼层引用
  - 楼层统计

- [ ] **评论表情**
  - 表情选择
  - 表情管理
  - 表情统计
  - 表情限制

- [ ] **评论图片**
  - 图片上传
  - 图片预览
  - 图片管理
  - 图片CDN

- [ ] **评论@提醒**
  - @用户
  - @提醒通知
  - @记录
  - @统计

---

## 五、权限管理模块 (P0)

### 5.1 角色管理
- [ ] **角色定义**
  - 普通用户
  - 版主
  - 管理员
  - 超级管理员

- [ ] **角色权限**
  - 角色权限配置
  - 权限继承
  - 权限覆盖
  - 权限查询

- [ ] **角色分配**
  - 用户角色分配
  - 版主任命
  - 管理员任命
  - 角色变更记录

- [ ] **角色管理**
  - 角色列表
  - 角色详情
  - 角色编辑
  - 角色删除

### 5.2 权限控制
- [ ] **功能权限**
  - 发帖权限
  - 回复权限
  - 编辑权限
  - 删除权限

- [ ] **数据权限**
  - 版块访问权限
  - 帖子查看权限
  - 评论查看权限
  - 数据导出权限

- [ ] **操作权限**
  - 置顶权限
  - 加精权限
  - 封禁权限
  - 审核权限

- [ ] **权限验证**
  - 权限守卫
  - 权限装饰器
  - 权限验证中间件
  - 权限错误处理

---

## 六、内容审核模块 (P1)

### 6.1 审核流程
- [ ] **内容审核**
  - 帖子审核
  - 评论审核
  - 图片审核
  - 附件审核

- [ ] **审核队列**
  - 待审核列表
  - 审核优先级
  - 审核分配
  - 审核统计

- [ ] **审核操作**
  - 通过审核
  - 拒绝审核
  - 退回修改
  - 审核备注

- [ ] **审核记录**
  - 审核历史
  - 审核日志
  - 审核统计
  - 审核报表

### 6.2 敏感词过滤
- [ ] **敏感词库**
  - 敏感词管理
  - 敏感词分类
  - 敏感词导入
  - 敏感词更新

- [ ] **敏感词检测**
  - 帖子内容检测
  - 评论内容检测
  - 用户名检测
  - 实时检测

- [ ] **敏感词处理**
  - 自动替换
  - 自动拒绝
  - 人工审核
  - 处理记录

- [ ] **敏感词统计**
  - 违规统计
  - 热门敏感词
  - 违规用户
  - 违规趋势

### 6.3 AI辅助审核
- [ ] **AI审核接口**
  - 内容安全检测
  - 图片识别
  - 文本分析
  - 风险评分

- [ ] **AI审核配置**
  - 审核阈值
  - 审核规则
  - 白名单
  - 黑名单

- [ ] **AI审核结果**
  - 结果展示
  - 人工复核
  - 结果统计
  - 效果评估

- [ ] **AI审核优化**
  - 误报反馈
  - 漏报反馈
  - 模型训练
  - 规则优化

---

## 七、积分系统模块 (P1)

### 7.1 积分规则
- [ ] **积分获取**
  - 发帖积分
  - 评论积分
  - 点赞积分
  - 签到积分

- [ ] **积分消费**
  - 积分兑换
  - 积分抽奖
  - 积分抵扣
  - 积分赠送

- [ ] **积分规则**
  - 规则配置
  - 规则启用/禁用
  - 规则优先级
  - 规则测试

- [ ] **积分限制**
  - 每日上限
  - 每周上限
  - 每月上限
  - 总积分上限

### 7.2 积分管理
- [ ] **积分查询**
  - 用户积分
  - 积分流水
  - 积分明细
  - 积分统计

- [ ] **积分操作**
  - 积分增加
  - 积分扣除
  - 积分冻结
  - 积分解冻

- [ ] **积分排行**
  - 总积分排行
  - 月积分排行
  - 周积分排行
  - 日积分排行

- [ ] **积分统计**
  - 积分发发统计
  - 积分消费统计
  - 积分趋势
  - 积分分析

### 7.3 积分任务
- [ ] **每日任务**
  - 签到任务
  - 发帖任务
  - 评论任务
  - 点赞任务

- [ ] **成就任务**
  - 发帖数量
  - 评论数量
  - 获赞数量
  - 粉丝数量

- [ ] **特殊任务**
  - 活动任务
  - 节日任务
  - 限时任务
  - 邀请任务

- [ ] **任务奖励**
  - 积分奖励
  - 徽章奖励
  - 特权奖励
  - 物品奖励

---

## 八、徽章系统模块 (P2)

### 8.1 徽章管理
- [ ] **徽章创建**
  - 徽章名称
  - 徽章图标
  - 徽章描述
  - 徽章类型

- [ ] **徽章编辑**
  - 修改徽章信息
  - 徽章状态管理
  - 徽章排序
  - 徽章分类

- [ ] **徽章删除**
  - 软删除徽章
  - 徽章回收
  - 删除确认
  - 删除记录

- [ ] **徽章查询**
  - 徽章列表
  - 徽章详情
  - 徽章搜索
  - 徽章筛选

### 8.2 徽章获取
- [ ] **徽章规则**
  - 获取条件
  - 自动发放
  - 手动发放
  - 规则配置

- [ ] **徽章类型**
  - 等级徽章
  - 活跃徽章
  - 成就徽章
  - 特殊徽章

- [ ] **徽章发放**
  - 自动发放
  - 手动发放
  - 批量发放
  - 发放记录

- [ ] **徽章回收**
  - 自动回收
  - 手动回收
  - 回收原因
  - 回收记录

### 8.3 徽章展示
- [ ] **徽章展示**
  - 用户主页展示
  - 帖子中展示
  - 评论中展示
  - 徽章墙

- [ ] **徽章统计**
  - 徽章数量
  - 徽章分布
  - 徽章热度
  - 徽章排行

- [ ] **徽章特权**
  - 特权配置
  - 特权验证
  - 特权使用
  - 特权记录

---

## 九、通知系统模块 (P1)

### 9.1 通知类型
- [ ] **回复通知**
  - 帖子回复通知
  - 评论回复通知
  - @提醒通知
  - 引用通知

- [ ] **互动通知**
  - 点赞通知
  - 收藏通知
  - 关注通知
  - 系统通知

- [ ] **系统通知**
  - 公告通知
  - 活动通知
  - 维护通知
  - 更新通知

- [ ] **审核通知**
  - 审核通过通知
  - 审核拒绝通知
  - 违规通知
  - 处罚通知

### 9.2 通知管理
- [ ] **通知发送**
  - 单个发送
  - 批量发送
  - 定时发送
  - 条件发送

- [ ] **通知接收**
  - 通知列表
  - 未读通知
  - 已读通知
  - 通知详情

- [ ] **通知操作**
  - 标记已读
  - 批量已读
  - 删除通知
  - 通知跳转

- [ ] **通知设置**
  - 通知开关
  - 通知类型
  - 通知频率
  - 通知方式

### 9.3 通知统计
- [ ] **通知统计**
  - 通知数量
  - 通知类型
  - 通知趋势
  - 通知分析

- [ ] **通知报表**
  - 日报表
  - 周报表
  - 月报表
  - 自定义报表

---

## 十、搜索功能模块 (P1)

### 10.1 搜索功能
- [ ] **帖子搜索**
  - 标题搜索
  - 内容搜索
  - 标签搜索
  - 作者搜索

- [ ] **用户搜索**
  - 用户名搜索
  - 昵称搜索
  - 等级筛选
  - 活跃度筛选

- [ ] **版块搜索**
  - 版块名称搜索
  - 版块描述搜索
  - 版块类型筛选
  - 版块热度筛选

- [ ] **评论搜索**
  - 评论内容搜索
  - 评论作者搜索
  - 评论时间筛选
  - 评论热度筛选

### 10.2 搜索优化
- [ ] **搜索建议**
  - 热门搜索
  - 搜索历史
  - 搜索推荐
  - 自动补全

- [ ] **搜索排序**
  - 相关度排序
  - 时间排序
  - 热度排序
  - 综合排序

- [ ] **搜索筛选**
  - 时间筛选
  - 版块筛选
  - 标签筛选
  - 用户筛选

- [ ] **搜索统计**
  - 搜索关键词
  - 搜索次数
  - 搜索结果
  - 搜索转化

---

## 十一、数据统计模块 (P2)

### 11.1 用户统计
- [ ] **用户数据**
  - 用户总数
  - 新增用户
  - 活跃用户
  - 用户留存

- [ ] **用户行为**
  - 发帖统计
  - 评论统计
  - 点赞统计
  - 收藏统计

- [ ] **用户分析**
  - 用户画像
  - 用户兴趣
  - 用户路径
  - 用户价值

### 11.2 内容统计
- [ ] **帖子数据**
  - 帖子总数
  - 新增帖子
  - 热门帖子
  - 精华帖子

- [ ] **评论数据**
  - 评论总数
  - 新增评论
  - 热门评论
  - 评论互动

- [ ] **版块数据**
  - 版块活跃度
  - 版块热度
  - 版块增长
  - 版块排行

### 11.3 系统统计
- [ ] **访问统计**
  - PV统计
  - UV统计
  - 访问时长
  - 跳出率

- [ ] **性能统计**
  - 响应时间
  - 错误率
  - 并发数
  - 资源占用

- [ ] **安全统计**
  - 攻击次数
  - 违规次数
  - 封禁次数
  - 审核统计

---

## 十二、安全防护模块 (P0)

### 12.1 基础防护
- [ ] **XSS防护**
  - 内容过滤
  - HTML转义
  - CSP策略
  - 安全头设置

- [ ] **CSRF防护**
  - CSRF Token
  - Token验证
  - Token刷新
  - SameSite Cookie

- [ ] **SQL注入防护**
  - 参数化查询
  - 输入验证
  - ORM防护
  - 错误处理

- [ ] **文件上传安全**
  - 文件类型验证
  - 文件大小限制
  - 文件内容检查
  - 病毒扫描

### 12.2 防刷机制
- [ ] **频率限制**
  - 发帖频率限制
  - 评论频率限制
  - 点赞频率限制
  - 注册频率限制

- [ ] **IP限制**
  - IP黑名单
  - IP白名单
  - IP限流
  - IP封禁

- [ ] **验证码**
  - 图形验证码
  - 滑动验证码
  - 行为验证
  - 短信验证

- [ ] **反垃圾**
  - 垃圾内容识别
  - 垃圾用户识别
  - 垃圾IP识别
  - 自动处理

### 12.3 内容安全
- [ ] **敏感词过滤**
  - 实时过滤
  - 替换处理
  - 拒绝发布
  - 人工审核

- [ ] **图片审核**
  - 图片识别
  - 内容检测
  - 风险评估
  - 自动处理

- [ ] **链接检测**
  - 恶意链接检测
  - 钓鱼链接检测
  - 链接白名单
  - 链接黑名单

- [ ] **内容加密**
  - 敏感信息加密
  - 传输加密
  - 存储加密
  - 密钥管理

---

## 十三、系统配置模块 (P1)

### 13.1 基础配置
- [ ] **站点配置**
  - 站点名称
  - 站点描述
  - 站点Logo
  - 站点关键词

- [ ] **功能配置**
  - 功能开关
  - 功能参数
  - 功能限制
  - 功能测试

- [ ] **审核配置**
  - 审核规则
  - 审核流程
  - 审核人员
  - 审核通知

- [ ] **积分配置**
  - 积分规则
  - 积分比例
  - 积分限制
  - 积分兑换

### 13.2 高级配置
- [ ] **缓存配置**
  - 缓存策略
  - 缓存时间
  - 缓存清理
  - 缓存预热

- [ ] **CDN配置**
  - CDN域名
  - CDN路径
  - CDN刷新
  - CDN监控

- [ ] **日志配置**
  - 日志级别
  - 日志保留
  - 日志分析
  - 日志告警

- [ ] **备份配置**
  - 备份策略
  - 备份频率
  - 备份保留
  - 备份恢复

---

## 开发优先级说明

### P0 - 核心功能（MVP）
- 用户管理
- 版块管理
- 帖子管理
- 评论管理
- 权限管理
- 安全防护

### P1 - 重要功能
- 内容审核
- 积分系统
- 通知系统
- 搜索功能
- 系统配置

### P2 - 增强功能
- 徽章系统
- 数据统计
- 高级功能

## 预估工作量

| 阶段 | 功能 | 工作量（人天） |
|------|------|----------------|
| MVP | P0功能 | 30-40 |
| 增强 | P1功能 | 20-30 |
| 优化 | P2功能 | 10-15 |
| **总计** | - | **60-85** |

## 待确认事项

1. **用户系统**: 是否复用现有 ClientUser 表？
2. **审核机制**: 是否需要AI辅助审核？
3. **积分系统**: 积分是否与漫画系统互通？
4. **通知推送**: 是否需要实时推送？
5. **搜索技术**: 初期使用数据库查询还是Elasticsearch？
6. **文件存储**: 论坛附件存储方案？
7. **数据迁移**: 是否需要从 zibll.com 迁移数据？
8. **性能要求**: 预期用户规模和并发量？
9. **开发优先级**: 哪些功能是MVP？
10. **测试要求**: 是否需要自动化测试？

请审核以上功能清单，确认后我们将进入下一阶段的共识文档编写。
