# ä»»åŠ¡æ‹†åˆ†æ–‡æ¡£ï¼šç»Ÿä¸€äº¤äº’æ¨¡å—é‡æ„

## ä¸€ã€ä»»åŠ¡ä¾èµ–å›¾

```mermaid
graph TB
    subgraph "Phase 1: æ•°æ®åº“å®šä¹‰ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰"
        T2[T2: åˆ›å»ºæ•°æ®æ¨¡å‹æ–‡ä»¶]
        T24[T24: æ”¹é€ ç§å­æ–‡ä»¶]
       
    end

    subgraph "Phase 2: æ‰§è¡Œæ•°æ®åº“è¿ç§»"
         T22[T22: æ‰§è¡Œæ•°æ®åº“è¿ç§»]
    end

    subgraph "Phase 3: åŸºç¡€è®¾æ–½"
        T1[T1: åˆ›å»º interaction æ¨¡å—ç»“æ„]
        T3[T3: åˆ›å»ºå¸¸é‡å’Œç±»å‹å®šä¹‰]
        T4[T4: åˆ›å»ºåŸºç¡€ DTO]
    end

    subgraph "Phase 4: æ ¸å¿ƒæœåŠ¡"
        T5[T5: åˆ›å»ºç›®æ ‡æ ¡éªŒå™¨]
        T6[T6: åˆ›å»ºè®¡æ•°å¤„ç†å™¨]
        T7[T7: åˆ›å»ºäº¤äº’åŸºç±»æœåŠ¡]
        T8[T8: åˆ›å»ºç‚¹èµæœåŠ¡]
        T9[T9: åˆ›å»ºæ”¶è—æœåŠ¡]
        T10[T10: åˆ›å»ºæµè§ˆè®°å½•æœåŠ¡]
        T11[T11: åˆ›å»ºè¯„è®ºæœåŠ¡]
        T12[T12: åˆ›å»ºè¯„è®ºç‚¹èµæœåŠ¡]
        T13[T13: åˆ›å»ºè¯„è®ºä¸¾æŠ¥æœåŠ¡]
        T14[T14: åˆ›å»ºä¸‹è½½æœåŠ¡]
    end

    subgraph "Phase 5: æ¨¡å—é›†æˆ"
        T15[T15: åˆ›å»º InteractionModule]
        T17[T17: æ›´æ–° ContentModule é›†æˆ]
        T18[T18: æ›´æ–° ForumModule é›†æˆ]
        T19[T19: åˆ é™¤æ—§è¡¨å’Œæ—§æœåŠ¡]
    end

    subgraph "Phase 6: éªŒè¯æµ‹è¯•"
        T20[T20: ç¼–å†™å•å…ƒæµ‹è¯•]
        T21[T21: ç¼–å†™é›†æˆæµ‹è¯•]
        T23[T23: éªŒè¯åŠŸèƒ½å®Œæ•´æ€§]
    end

    %% æ•°æ®åº“å®šä¹‰é˜¶æ®µï¼ˆå¿…é¡»å…ˆå®Œæˆï¼‰
    T2 --> T16 --> T22

    %% æ•°æ®åº“è¿ç§»æˆåŠŸåæ‰èƒ½è¿›è¡Œç§å­æ–‡ä»¶æ”¹é€ 
    T22 --> T24

    %% ç§å­æ–‡ä»¶æ”¹é€ åæ‰èƒ½è¿›è¡ŒåŸºç¡€è®¾æ–½
    T24 --> T1 --> T3 --> T4

    %% åŸºç¡€è®¾æ–½å®Œæˆåè¿›è¡Œæ ¸å¿ƒæœåŠ¡å¼€å‘
    T4 --> T5 --> T6 --> T7
    T7 --> T8
    T7 --> T9
    T7 --> T10
    T7 --> T11
    T7 --> T14
    T2 -.-> T12
    T2 -.-> T13

    %% æ ¸å¿ƒæœåŠ¡å®Œæˆåè¿›è¡Œæ¨¡å—é›†æˆ
    T8 --> T15
    T9 --> T15
    T10 --> T15
    T11 --> T15
    T12 --> T15
    T13 --> T15
    T14 --> T15

    T15 --> T17
    T15 --> T18
    T17 --> T19
    T18 --> T19

    %% æœ€åè¿›è¡Œæµ‹è¯•éªŒè¯
    T19 --> T20 --> T21 --> T23
```

## äºŒã€æ‰§è¡Œæµç¨‹çº¦æŸ

**âš ï¸ å¼ºåˆ¶æ‰§è¡Œé¡ºåºï¼šæ•°æ®åº“ä¼˜å…ˆåŸåˆ™**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Phase 1: æ•°æ®åº“å®šä¹‰ï¼ˆå¿…é¡»å…ˆå®Œæˆï¼‰                            â”‚
â”‚  - T2: åˆ›å»º Prisma æ•°æ®æ¨¡å‹æ–‡ä»¶                              â”‚
â”‚  - T16: ç¼–å†™æ•°æ®è¿ç§»è„šæœ¬                                     â”‚
â”‚  - T22: æ‰§è¡Œ pnpm prisma:update å¹¶æˆåŠŸè¿ç§»                   â”‚
â”‚                                                             â”‚
â”‚  ğŸ”´ é˜»å¡æ¡ä»¶ï¼šæ­¤é˜¶æ®µæœªå®Œæˆå‰ï¼Œç¦æ­¢å¼€å§‹ä»»ä½•å…¶ä»–ä»»åŠ¡              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Phase 2: ç§å­æ–‡ä»¶æ”¹é€                                        â”‚
â”‚  - T24: æ”¹é€ ç§å­æ–‡ä»¶ä»¥æ”¯æŒæ–°çš„æ•°æ®æ¨¡å‹                        â”‚
â”‚  - éªŒè¯ç§å­æ•°æ®å¯æ­£å¸¸æ’å…¥                                     â”‚
â”‚                                                             â”‚
â”‚  ğŸ”´ é˜»å¡æ¡ä»¶ï¼šæ•°æ®åº“è¿ç§»å¿…é¡»æˆåŠŸï¼Œç§å­æ–‡ä»¶å¿…é¡»å¯æ­£å¸¸æ‰§è¡Œ        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Phase 3: åŸºç¡€è®¾æ–½                                           â”‚
â”‚  - T1: åˆ›å»ºæ¨¡å—ç»“æ„                                          â”‚
â”‚  - T3: åˆ›å»ºå¸¸é‡å’Œç±»å‹å®šä¹‰                                     â”‚
â”‚  - T4: åˆ›å»ºåŸºç¡€ DTO                                          â”‚
â”‚                                                             â”‚
â”‚  âš ï¸ ä»…åœ¨æ•°æ®åº“å’Œç§å­æ–‡ä»¶å‡†å¤‡å®Œæˆåå¼€å§‹                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Phase 4: æ ¸å¿ƒæœåŠ¡                                           â”‚
â”‚  - T5-T7: æ ¸å¿ƒæŠ½è±¡                                           â”‚
â”‚  - T8-T14: ä¸šåŠ¡æœåŠ¡                                          â”‚
â”‚                                                             â”‚
â”‚  âš ï¸ ä»…åœ¨åŸºç¡€è®¾æ–½å®Œæˆåå¼€å§‹                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Phase 5: æ¨¡å—é›†æˆ                                           â”‚
â”‚  - T15: åˆ›å»º InteractionModule                               â”‚
â”‚  - T17-T18: æ›´æ–° ContentModule å’Œ ForumModule é›†æˆ           â”‚
â”‚  - T19: åˆ é™¤æ—§è¡¨å’Œæ—§æœåŠ¡                                      â”‚
â”‚                                                             â”‚
â”‚  âš ï¸ ä»…åœ¨æ ¸å¿ƒæœåŠ¡å®Œæˆåå¼€å§‹                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Phase 6: éªŒè¯æµ‹è¯•                                           â”‚
â”‚  - T20: ç¼–å†™å•å…ƒæµ‹è¯•                                         â”‚
â”‚  - T21: ç¼–å†™é›†æˆæµ‹è¯•                                         â”‚
â”‚  - T23: éªŒè¯åŠŸèƒ½å®Œæ•´æ€§                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ä¸‰ã€æ•°æ®åº“è¿ç§»æ£€æŸ¥ç‚¹

**æ‰§è¡Œ `pnpm prisma:update` å‰å¿…é¡»ç¡®è®¤ï¼š**
- [ ] æ‰€æœ‰ Prisma æ¨¡å‹æ–‡ä»¶å·²åˆ›å»ºï¼ˆT2 å®Œæˆï¼‰
- [ ] æ¨¡å‹å…³ç³»å®šä¹‰æ­£ç¡®
- [ ] ç´¢å¼•è®¾è®¡åˆç†
- [ ] å­—æ®µæ³¨é‡Šå®Œæ•´
- [ ] è¿ç§»è„šæœ¬å·²ç¼–å†™ï¼ˆT16 å®Œæˆï¼‰

**è¿ç§»æˆåŠŸåå¿…é¡»éªŒè¯ï¼š**
- [ ] æ•°æ®åº“è¡¨ç»“æ„æ­£ç¡®
- [ ] å¤–é”®çº¦æŸæ­£å¸¸
- [ ] ç´¢å¼•åˆ›å»ºæˆåŠŸ
- [ ] ç§å­æ•°æ®å¯æ­£å¸¸æ’å…¥ï¼ˆT24 éªŒè¯ï¼‰

**æ•°æ®åº“è¿ç§»å¤±è´¥æ—¶çš„å¤„ç†ï¼š**
1. ç«‹å³åœæ­¢æ‰€æœ‰åç»­ä»»åŠ¡
2. æ£€æŸ¥è¿ç§»è„šæœ¬å’Œæ¨¡å‹å®šä¹‰
3. ä¿®å¤é—®é¢˜åé‡æ–°æ‰§è¡Œ `pnpm prisma:update`
4. ç¡®è®¤æˆåŠŸåå†ç»§ç»­åç»­ä»»åŠ¡

## å››ã€åŸå­ä»»åŠ¡æ¸…å•

### Phase 1: æ•°æ®åº“å®šä¹‰ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰

#### T2: åˆ›å»ºæ•°æ®æ¨¡å‹æ–‡ä»¶

**è¾“å…¥å¥‘çº¦:**
- CONSENSUS æ–‡æ¡£ä¸­çš„æ•°æ®æ¨¡å‹è®¾è®¡
- Prisma schema è§„èŒƒ

**è¾“å‡ºå¥‘çº¦:**
- `prisma/models/app/` ç›®å½•ï¼ˆç”¨æˆ·åŸŸï¼‰
- ä»¥ä¸‹æ¨¡å‹æ–‡ä»¶:
  - `user-like.prisma`
  - `user-favorite.prisma`
  - `user-view.prisma`
  - `user-comment.prisma`
  - `user-comment-like.prisma`
  - `user-comment-report.prisma`
  - `user-download.prisma`

**å®ç°çº¦æŸ:**
- éµå¾ªç°æœ‰ Prisma æ¨¡å‹å‘½åè§„èŒƒ
- **æ‰€æœ‰äº¤äº’è¡¨æ”¾å…¥ `prisma/models/app/` ç›®å½•**ï¼ˆç”¨æˆ·åŸŸï¼‰
- **ç´¢å¼•ä¸éœ€è¦æŒ‡å®š name å‚æ•°**
- æ­£ç¡®è®¾ç½®å…³è”å…³ç³»
- **æ‰€æœ‰å­—æ®µæ·»åŠ è¯¦ç»†çš„æ•°æ®åº“æ³¨é‡Š**
- **targetType ä½¿ç”¨æ•°å­—ç±»å‹ï¼ˆIntï¼‰**
- **ä¸ä½¿ç”¨ JSON ç±»å‹çš„ metadata å­—æ®µ**
- **æµè§ˆè®°å½•è¡¨æ”¯æŒäº”ç§ç›®æ ‡ç±»å‹ï¼šæ¼«ç”»ã€å°è¯´ã€æ¼«ç”»ç« èŠ‚ã€å°è¯´ç« èŠ‚ã€è®ºå›ä¸»é¢˜**
- **æµè§ˆè®°å½•è¡¨ä¸åŒ…å« duration å­—æ®µ**
- **ä¸‹è½½è¡¨æ”¯æŒå››ç§ç›®æ ‡ç±»å‹ï¼šæ¼«ç”»ã€å°è¯´ã€æ¼«ç”»ç« èŠ‚ã€å°è¯´ç« èŠ‚**
- **ä¸‹è½½è¡¨åŒ…å« targetIdã€workId å’Œ workType å­—æ®µ**
- **æ”¶è—è¡¨åŒ…å« workType å­—æ®µ**
- **è¯„è®ºè¡¨æ”¯æŒæ¼«ç”»ã€æ¼«ç”»ç« èŠ‚ã€å°è¯´ã€å°è¯´ç« èŠ‚ã€è®ºå›äº”ç§ç›®æ ‡ç±»å‹**

**éªŒæ”¶æ ‡å‡†:**
- Prisma schema ç¼–è¯‘é€šè¿‡ï¼ˆ`npx prisma validate` é€šè¿‡ï¼‰
- æ¨¡å‹å…³ç³»æ­£ç¡®
- æ‰€æœ‰å­—æ®µæœ‰è¯¦ç»†æ³¨é‡Š
- è¯„è®ºåŠŸèƒ½æ”¯æŒäº”ç§ç›®æ ‡ç±»å‹
- **æµè§ˆè®°å½•æ”¯æŒåˆ é™¤åŠŸèƒ½**
- **æµè§ˆè®°å½•æ”¯æŒä½œå“å’Œç« èŠ‚**
- **ä¸‹è½½æ”¯æŒä½œå“å’Œç« èŠ‚**

---

#### T16: ç¼–å†™æ•°æ®è¿ç§»è„šæœ¬

**è¾“å…¥å¥‘çº¦:**
- æ—§è¡¨æ•°æ®ç»“æ„
- æ–°è¡¨æ•°æ®ç»“æ„
- æ•°æ®æ˜ å°„è§„åˆ™

**è¾“å‡ºå¥‘çº¦:**
- `prisma/migrations/` è¿ç§»æ–‡ä»¶
- æ•°æ®è¿ç§» SQL è„šæœ¬

**å®ç°çº¦æŸ:**
- ä¿è¯æ•°æ®å®Œæ•´æ€§
- æ”¯æŒå›æ»š
- è®°å½•è¿ç§»æ—¥å¿—
- **è¿ç§»æ—¶åŒºåˆ†æ¼«ç”»å’Œå°è¯´ç±»å‹**
- **work_like -> user_like æ—¶ï¼Œæ ¹æ®ä½œå“ç±»å‹è®¾ç½® targetType ä¸º COMIC æˆ– NOVEL**
- **work_chapter_like -> user_like æ—¶ï¼Œæ ¹æ®ç« èŠ‚æ‰€å±ä½œå“ç±»å‹è®¾ç½® targetType ä¸º COMIC_CHAPTER æˆ– NOVEL_CHAPTER**
- **è¯„è®ºæ•°æ®è¿ç§»æ—¶ï¼ŒåŒºåˆ†æ¼«ç”»ä½œå“è¯„è®ºã€å°è¯´ä½œå“è¯„è®ºã€æ¼«ç”»ç« èŠ‚è¯„è®ºã€å°è¯´ç« èŠ‚è¯„è®ºã€è®ºå›å›å¤**

**éªŒæ”¶æ ‡å‡†:**
- è¿ç§»è„šæœ¬å¯æ‰§è¡Œ
- æ•°æ®æ— ä¸¢å¤±
- æ­£ç¡®åŒºåˆ†æ¼«ç”»å’Œå°è¯´ç±»å‹
- è¯„è®ºæ•°æ®æ­£ç¡®è¿ç§»åˆ°äº”ç§ç›®æ ‡ç±»å‹

---

#### T22: æ‰§è¡Œæ•°æ®åº“è¿ç§»

**è¾“å…¥å¥‘çº¦:**
- T2 å®Œæˆçš„æ•°æ®æ¨¡å‹æ–‡ä»¶
- T16 å®Œæˆçš„è¿ç§»è„šæœ¬
- æ•°æ®åº“å¤‡ä»½

**è¾“å‡ºå¥‘çº¦:**
- æˆåŠŸè¿ç§»çš„æ•°æ®åº“
- è¿ç§»æ‰§è¡Œæ—¥å¿—

**å®ç°çº¦æŸ:**
- æ‰§è¡Œ `pnpm prisma:update` å‘½ä»¤
- éªŒè¯è¿ç§»æˆåŠŸ
- ç¡®è®¤æ‰€æœ‰è¡¨ç»“æ„æ­£ç¡®

**éªŒæ”¶æ ‡å‡†:**
- `pnpm prisma:update` æ‰§è¡ŒæˆåŠŸ
- æ•°æ®åº“è¡¨ç»“æ„æ­£ç¡®
- ç´¢å¼•åˆ›å»ºæˆåŠŸ
- å¤–é”®çº¦æŸæ­£å¸¸

**ğŸ”´ é‡è¦ï¼šæ­¤ä»»åŠ¡æœªå®Œæˆå‰ï¼Œç¦æ­¢å¼€å§‹ Phase 2 åŠåç»­ä»»åŠ¡**

---

### Phase 2: ç§å­æ–‡ä»¶æ”¹é€ 

#### T24: æ”¹é€ ç§å­æ–‡ä»¶

**è¾“å…¥å¥‘çº¦:**
- T22 å®Œæˆçš„æ•°æ®åº“ç»“æ„
- æ–°çš„æ•°æ®æ¨¡å‹å®šä¹‰

**è¾“å‡ºå¥‘çº¦:**
- `prisma/seed/interaction.seed.ts` ç§å­æ–‡ä»¶
- æ›´æ–° `prisma/seed/index.ts` å¯¼å‡º

**å®ç°çº¦æŸ:**
- ä½¿ç”¨æ–°çš„è¡¨åå’Œå­—æ®µ
- æ”¯æŒæ‰€æœ‰ç›®æ ‡ç±»å‹
- åŒ…å«æµ‹è¯•æ•°æ®è¦†ç›–æ‰€æœ‰äº¤äº’ç±»å‹

**éªŒæ”¶æ ‡å‡†:**
- `pnpm prisma:reset` æ‰§è¡ŒæˆåŠŸ
- ç§å­æ•°æ®å¯æ­£å¸¸æ’å…¥
- æ‰€æœ‰è¡¨éƒ½æœ‰æµ‹è¯•æ•°æ®

**ğŸ”´ é‡è¦ï¼šæ­¤ä»»åŠ¡æœªå®Œæˆå‰ï¼Œç¦æ­¢å¼€å§‹ Phase 3 åŠåç»­ä»»åŠ¡**

---

### Phase 3: åŸºç¡€è®¾æ–½

#### T1: åˆ›å»º interaction æ¨¡å—ç»“æ„

**è¾“å…¥å¥‘çº¦:**
- é¡¹ç›® libs ç›®å½•ç»“æ„
- NestJS æ¨¡å—è§„èŒƒ

**è¾“å‡ºå¥‘çº¦:**
- `libs/interaction/` ç›®å½•ç»“æ„ï¼ˆéµå¾ªé¡¹ç›®è§„èŒƒï¼‰
- ä»¥ä¸‹å­ç›®å½•ç»“æ„ï¼š
  - `like/` ç‚¹èµæ¨¡å—
  - `favorite/` æ”¶è—æ¨¡å—
  - `view/` æµè§ˆè®°å½•æ¨¡å—
  - `comment/` è¯„è®ºæ¨¡å—
  - `comment-like/` è¯„è®ºç‚¹èµæ¨¡å—ï¼ˆç‹¬ç«‹å­æ¨¡å—ï¼‰
  - `comment-report/` è¯„è®ºä¸¾æŠ¥æ¨¡å—ï¼ˆç‹¬ç«‹å­æ¨¡å—ï¼‰
  - `download/` ä¸‹è½½æ¨¡å—
  - `counter/` è®¡æ•°å¤„ç†å™¨æ¨¡å—ï¼ˆç‹¬ç«‹å­æ¨¡å—ï¼‰
  - `validator/` ç›®æ ‡æ ¡éªŒå™¨æ¨¡å—ï¼ˆç‹¬ç«‹å­æ¨¡å—ï¼‰
  - æ ¹ç›®å½•ï¼š`base-interaction.service.ts`ã€`interaction.constant.ts`ã€`interaction.types.ts`
- `package.json` é…ç½®
- `tsconfig.lib.json` é…ç½®

**å®ç°çº¦æŸ:**
- éµå¾ªé¡¹ç›®ç°æœ‰æ¨¡å—ç»“æ„ï¼ˆå‚è€ƒ `libs/forum`ã€`libs/content`ã€`libs/user`ï¼‰
- æ¯ä¸ªåŠŸèƒ½å­æ¨¡å—ç‹¬ç«‹ç›®å½•ï¼Œå†…éƒ¨åŒ…å« `dto/`ã€`*.module.ts`ã€`*.service.ts`ã€`*.constant.ts`ã€`index.ts`
- **ä¸ä½¿ç”¨ `common/` ç›®å½•**ï¼Œå…¬å…±ç»„ä»¶æ‰å¹³åŒ–æ”¾ç½®
- å‚è€ƒ `libs/forum` çš„ `reply/` å’Œ `reply-like/` åˆ†ç¦»æ¨¡å¼
- é…ç½®æ­£ç¡®çš„è·¯å¾„åˆ«å

**éªŒæ”¶æ ‡å‡†:**
- ç›®å½•ç»“æ„ç¬¦åˆé¡¹ç›®è§„èŒƒ
- TypeScript ç¼–è¯‘é€šè¿‡

---

#### T3: åˆ›å»ºå¸¸é‡å’Œç±»å‹å®šä¹‰

**è¾“å…¥å¥‘çº¦:**
- ç›®æ ‡ç±»å‹æšä¸¾è®¾è®¡
- æ“ä½œç±»å‹æšä¸¾è®¾è®¡

**è¾“å‡ºå¥‘çº¦:**
- `libs/interaction/src/` æ ¹ç›®å½•æ–‡ä»¶
  - `interaction.constant.ts` (å…¬å…±å¸¸é‡ï¼šç›®æ ‡ç±»å‹ã€æ“ä½œç±»å‹ã€å®¡æ ¸çŠ¶æ€ã€ä¸¾æŠ¥çŠ¶æ€)
  - `interaction.types.ts` (å…¬å…±ç±»å‹å®šä¹‰)
  - `index.ts`

**å®ç°çº¦æŸ:**
- ä½¿ç”¨ TypeScript æ•°å­—æšä¸¾ï¼ˆéå­—ç¬¦ä¸²æšä¸¾ï¼‰
- æ‰€æœ‰æšä¸¾å€¼æ·»åŠ è¯¦ç»†çš„ JSDoc æ³¨é‡Š
- ä½œå“ç±»å‹å¿…é¡»åŒºåˆ† COMIC å’Œ NOVEL
- å¯¼å‡ºæ‰€æœ‰å¿…è¦çš„ç±»å‹
- **è¯„è®ºåŠŸèƒ½æ”¯æŒçš„ç›®æ ‡ç±»å‹å¸¸é‡**
- **å¸¸é‡å’Œç±»å‹æ–‡ä»¶æ”¾åœ¨æ ¹ç›®å½•ï¼Œä¸åˆ›å»º `constants/` å’Œ `types/` å­ç›®å½•**

**éªŒæ”¶æ ‡å‡†:**
- ç±»å‹å®šä¹‰å®Œæ•´
- å¯¼å‡ºæ­£ç¡®
- æ³¨é‡Šè¯¦ç»†æ˜ç¡®

---

#### T4: åˆ›å»ºåŸºç¡€ DTO

**è¾“å…¥å¥‘çº¦:**
- äº¤äº’æ“ä½œçš„æ•°æ®ç»“æ„
- NestJS DTO è§„èŒƒ

**è¾“å‡ºå¥‘çº¦:**
- `libs/interaction/src/like/dto/` ç›®å½•
  - `like.dto.ts`
  - `index.ts`
- `libs/interaction/src/favorite/dto/` ç›®å½•
  - `favorite.dto.ts`
  - `index.ts`
- `libs/interaction/src/view/dto/` ç›®å½•
  - `view.dto.ts` (ä¸åŒ…å« duration å­—æ®µ)
  - `index.ts`
- `libs/interaction/src/comment/dto/` ç›®å½•
  - `comment.dto.ts`
  - `index.ts`
- `libs/interaction/src/comment-like/dto/` ç›®å½•
  - `comment-like.dto.ts`
  - `index.ts`
- `libs/interaction/src/comment-report/dto/` ç›®å½•
  - `comment-report.dto.ts`
  - `index.ts`
- `libs/interaction/src/download/dto/` ç›®å½•
  - `download.dto.ts` (åŒ…å« workId, workType å­—æ®µ)
  - `index.ts`

**å®ç°çº¦æŸ:**
- ä½¿ç”¨ class-validator è£…é¥°å™¨
- ä½¿ç”¨ class-transformer è£…é¥°å™¨
- æ·»åŠ  Swagger æ–‡æ¡£è£…é¥°å™¨
- **å®Œå…¨ä¸éœ€è¦å‘åå…¼å®¹ï¼Œä½¿ç”¨å…¨æ–°çš„ DTO è®¾è®¡**
- **targetType ä½¿ç”¨æ•°å­—ç±»å‹**
- **ä¸ä½¿ç”¨ metadata å­—æ®µï¼Œæ‹†åˆ†ä¸ºå…·ä½“å­—æ®µ**
- **è¯„è®º DTO æ”¯æŒäº”ç§ç›®æ ‡ç±»å‹**
- **è¯„è®ºç‚¹èµå’Œè¯„è®ºä¸¾æŠ¥ DTO æ”¾åœ¨ç‹¬ç«‹å­æ¨¡å—ä¸­**

**éªŒæ”¶æ ‡å‡†:**
- DTO éªŒè¯æ­£ç¡®
- Swagger æ–‡æ¡£ç”Ÿæˆæ­£ç¡®
- ä½¿ç”¨å…·ä½“å­—æ®µè€Œé metadata
- è¯„è®ºåŠŸèƒ½æ”¯æŒå®Œæ•´

---

### Phase 4: æ ¸å¿ƒæœåŠ¡

#### T5: åˆ›å»ºç›®æ ‡æ ¡éªŒå™¨

**è¾“å…¥å¥‘çº¦:**
- ç›®æ ‡æ ¡éªŒå™¨æ¥å£è®¾è®¡
- å„ç›®æ ‡ç±»å‹çš„æ ¡éªŒé€»è¾‘

**è¾“å‡ºå¥‘çº¦:**
- `libs/interaction/src/validator/` ç›®å½•ï¼ˆç‹¬ç«‹å­æ¨¡å—ï¼‰
  - `target-validator.interface.ts`
  - `target-validator.registry.ts`
  - `comic.validator.ts`
  - `novel.validator.ts`
  - `comic-chapter.validator.ts`
  - `novel-chapter.validator.ts`
  - `forum-topic.validator.ts`
  - `validator.module.ts`
  - `index.ts`

**å®ç°çº¦æŸ:**
- å®ç°ç»Ÿä¸€çš„æ ¡éªŒæ¥å£
- æ”¯æŒåŠ¨æ€æ³¨å†Œæ ¡éªŒå™¨
- è¿”å›è¯¦ç»†çš„æ ¡éªŒç»“æœ
- æ¼«ç”»å’Œå°è¯´ä½¿ç”¨ç‹¬ç«‹çš„æ ¡éªŒå™¨ï¼Œä¸ä½¿ç”¨é€šç”¨"ä½œå“"æ ¡éªŒå™¨
- **è¯„è®ºç‚¹èµä½¿ç”¨ç‹¬ç«‹çš„ user_comment_like è¡¨ï¼Œä¸éœ€è¦ forum-reply æ ¡éªŒå™¨**
- **æ ¡éªŒå™¨ä½œä¸ºç‹¬ç«‹å­æ¨¡å—ï¼Œä¸æ”¾åœ¨ `common/` ç›®å½•ä¸‹**

**éªŒæ”¶æ ‡å‡†:**
- æ ¡éªŒé€»è¾‘æ­£ç¡®
- æ”¯æŒæ‰€æœ‰ç›®æ ‡ç±»å‹
- æ¼«ç”»å’Œå°è¯´æ ¡éªŒå™¨ç‹¬ç«‹

---

#### T6: åˆ›å»ºè®¡æ•°å¤„ç†å™¨

**è¾“å…¥å¥‘çº¦:**
- è®¡æ•°å¤„ç†å™¨æ¥å£è®¾è®¡
- å„ç›®æ ‡ç±»å‹çš„è®¡æ•°é€»è¾‘

**è¾“å‡ºå¥‘çº¦:**
- `libs/interaction/src/counter/` ç›®å½•ï¼ˆç‹¬ç«‹å­æ¨¡å—ï¼‰
  - `counter-handler.interface.ts`
  - `counter-handler.registry.ts`
  - `work-counter.handler.ts`      # ä½œå“è®¡æ•°å¤„ç†å™¨ï¼ˆåŒ…å«æ¼«ç”»å’Œå°è¯´ï¼‰
  - `comic-chapter-counter.handler.ts`   # æ¼«ç”»ç« èŠ‚è®¡æ•°å¤„ç†å™¨
  - `novel-chapter-counter.handler.ts`   # å°è¯´ç« èŠ‚è®¡æ•°å¤„ç†å™¨
  - `forum-counter.handler.ts`     # è®ºå›è®¡æ•°å¤„ç†å™¨
  - `counter.module.ts`
  - `index.ts`

**å®ç°çº¦æŸ:**
- æ”¯æŒäº‹åŠ¡å†…æ›´æ–°è®¡æ•°
- æ”¯æŒä½œè€…è®¡æ•°æ›´æ–°
- æ”¯æŒæ‰¹é‡è®¡æ•°æ›´æ–°
- æ¼«ç”»å’Œå°è¯´ä½¿ç”¨ç‹¬ç«‹çš„è®¡æ•°å¤„ç†å™¨
- **è®¡æ•°å¤„ç†å™¨ä½œä¸ºç‹¬ç«‹å­æ¨¡å—ï¼Œä¸æ”¾åœ¨ `common/` ç›®å½•ä¸‹**

**éªŒæ”¶æ ‡å‡†:**
- è®¡æ•°æ›´æ–°æ­£ç¡®
- äº‹åŠ¡æ”¯æŒæ­£ç¡®
- æ¼«ç”»å’Œå°è¯´è®¡æ•°ç‹¬ç«‹

---

#### T7: åˆ›å»ºäº¤äº’åŸºç±»æœåŠ¡

**è¾“å…¥å¥‘çº¦:**
- BaseService åŸºç±»
- äº¤äº’æ“ä½œçš„é€šç”¨é€»è¾‘

**è¾“å‡ºå¥‘çº¦:**
- `libs/interaction/src/` æ ¹ç›®å½•æ–‡ä»¶
  - `base-interaction.service.ts`

**å®ç°çº¦æŸ:**
- æä¾›é€šç”¨çš„ CRUD æ“ä½œ
- æ”¯æŒäº‹åŠ¡å¤„ç†
- æ”¯æŒæ‰©å±•ç‚¹
- **åŸºç±»æœåŠ¡æ”¾åœ¨æ ¹ç›®å½•ï¼Œä¸æ”¾åœ¨ `common/services/` ç›®å½•ä¸‹**

**éªŒæ”¶æ ‡å‡†:**
- åŸºç±»æ–¹æ³•å®Œæ•´
- å¯è¢«å­ç±»æ­£ç¡®ç»§æ‰¿

---

#### T8: åˆ›å»ºç‚¹èµæœåŠ¡

**è¾“å…¥å¥‘çº¦:**
- BaseInteractionService åŸºç±»
- ç‚¹èµä¸šåŠ¡é€»è¾‘

**è¾“å‡ºå¥‘çº¦:**
- `libs/interaction/src/like/` ç›®å½•
  - `like.constant.ts`
  - `like.module.ts`
  - `like.service.ts`
  - `index.ts`

**å®ç°çº¦æŸ:**
- ç»§æ‰¿ BaseInteractionService
- å®ç°ç‚¹èµ/å–æ¶ˆç‚¹èµ/toggle
- æ”¯æŒæ‰¹é‡æŸ¥è¯¢ç”¨æˆ·çŠ¶æ€
- è§¦å‘æˆé•¿äº‹ä»¶

**éªŒæ”¶æ ‡å‡†:**
- ç‚¹èµåŠŸèƒ½æ­£å¸¸
- è®¡æ•°æ›´æ–°æ­£ç¡®
- æˆé•¿äº‹ä»¶è§¦å‘æ­£ç¡®

---

#### T9: åˆ›å»ºæ”¶è—æœåŠ¡

**è¾“å…¥å¥‘çº¦:**
- BaseInteractionService åŸºç±»
- æ”¶è—ä¸šåŠ¡é€»è¾‘

**è¾“å‡ºå¥‘çº¦:**
- `libs/interaction/src/favorite/` ç›®å½•
  - `favorite.constant.ts`
  - `favorite.module.ts`
  - `favorite.service.ts`
  - `index.ts`

**å®ç°çº¦æŸ:**
- ç»§æ‰¿ BaseInteractionService
- æ”¯æŒæŒ‰ç±»å‹ç­›é€‰
- æ”¶è—ä½œå“æ—¶è®°å½•ä½œå“ç±»å‹(workTypeå­—æ®µ)

**éªŒæ”¶æ ‡å‡†:**
- æ”¶è—åŠŸèƒ½æ­£å¸¸
- ä½œå“ç±»å‹è®°å½•æ­£ç¡®

---

#### T10: åˆ›å»ºæµè§ˆè®°å½•æœåŠ¡

**è¾“å…¥å¥‘çº¦:**
- BaseInteractionService åŸºç±»
- æµè§ˆè®°å½•ä¸šåŠ¡é€»è¾‘

**è¾“å‡ºå¥‘çº¦:**
- `libs/interaction/src/view/` ç›®å½•
  - `view.constant.ts`
  - `view.module.ts`
  - `view.service.ts`
  - `index.ts`

**å®ç°çº¦æŸ:**
- **æ”¯æŒäº”ç§ç›®æ ‡ç±»å‹ï¼šæ¼«ç”»ã€å°è¯´ã€æ¼«ç”»ç« èŠ‚ã€å°è¯´ç« èŠ‚ã€è®ºå›ä¸»é¢˜**
- æ”¯æŒé‡å¤æµè§ˆè®°å½•
- æ”¯æŒæµè§ˆç»Ÿè®¡
- æ”¯æŒè¿‡æœŸæ•°æ®æ¸…ç†
- **ä¸è®°å½•æµè§ˆæ—¶é•¿**
- **è®°å½• IP åœ°å€ã€è®¾å¤‡ä¿¡æ¯ã€ç”¨æˆ·ä»£ç†ç­‰å…·ä½“å­—æ®µ**
- **æ”¯æŒç”¨æˆ·åˆ é™¤æµè§ˆè®°å½•**

**éªŒæ”¶æ ‡å‡†:**
- æµè§ˆè®°å½•æ­£å¸¸
- ç»Ÿè®¡åŠŸèƒ½æ­£ç¡®
- ä¸åŒ…å« duration å­—æ®µ
- **æ”¯æŒåˆ é™¤åŠŸèƒ½**
- **æ”¯æŒä½œå“å’Œç« èŠ‚æµè§ˆè®°å½•**

---

#### T11: åˆ›å»ºè¯„è®ºæœåŠ¡

**è¾“å…¥å¥‘çº¦:**
- è¯„è®ºä¸šåŠ¡é€»è¾‘
- æ•æ„Ÿè¯æ£€æµ‹æœåŠ¡

**è¾“å‡ºå¥‘çº¦:**
- `libs/interaction/src/comment/` ç›®å½•
  - `comment.constant.ts`
  - `comment.module.ts`
  - `comment.service.ts`
  - `index.ts`

**å®ç°çº¦æŸ:**
- **æ”¯æŒäº”ç§ç›®æ ‡ç±»å‹ï¼šæ¼«ç”»ã€æ¼«ç”»ç« èŠ‚ã€å°è¯´ã€å°è¯´ç« èŠ‚ã€è®ºå›**
- æ”¯æŒæ¥¼ä¸­æ¥¼å›å¤
- æ”¯æŒæ•æ„Ÿè¯æ£€æµ‹
- æ”¯æŒå®¡æ ¸æµç¨‹
- æ”¯æŒè½¯åˆ é™¤

**éªŒæ”¶æ ‡å‡†:**
- è¯„è®ºåŠŸèƒ½æ­£å¸¸
- æ”¯æŒæ¼«ç”»ã€æ¼«ç”»ç« èŠ‚ã€å°è¯´ã€å°è¯´ç« èŠ‚ã€è®ºå›äº”ç§ç›®æ ‡ç±»å‹
- å®¡æ ¸æµç¨‹æ­£ç¡®
- æ•æ„Ÿè¯æ£€æµ‹æ­£ç¡®

---

#### T12: åˆ›å»ºè¯„è®ºç‚¹èµæœåŠ¡

**è¾“å…¥å¥‘çº¦:**
- `user_comment_like` è¡¨ç»“æ„å·²å®šä¹‰ï¼ˆT2 å®Œæˆï¼‰
- è¯„è®ºç‚¹èµä¸šåŠ¡é€»è¾‘

**è¾“å‡ºå¥‘çº¦:**
- `libs/interaction/src/comment-like/` ç›®å½•ï¼ˆç‹¬ç«‹å­æ¨¡å—ï¼‰
  - `comment-like.module.ts`
  - `comment-like.service.ts`
  - `index.ts`

**å®ç°çº¦æŸ:**
- æ›´æ–°è¯„è®ºç‚¹èµè®¡æ•°
- æ”¯æŒæ‰¹é‡æŸ¥è¯¢
- **ä»…ä¾èµ–æ•°æ®åº“è¡¨ç»“æ„ï¼Œä¸ä¾èµ– CommentService çš„ä¸šåŠ¡é€»è¾‘**
- **è¯„è®ºç‚¹èµä½œä¸ºç‹¬ç«‹å­æ¨¡å—ï¼Œå‚è€ƒ `libs/forum/reply-like/` ç»“æ„**

**ä¾èµ–å…³ç³»:**
- **å‰ç½®ä¾èµ–:** T2ï¼ˆæ•°æ®æ¨¡å‹ï¼‰
- **å¹¶è¡Œä»»åŠ¡:** T8-T11, T13, T14
- **åç½®ä»»åŠ¡:** T15

**éªŒæ”¶æ ‡å‡†:**
- è¯„è®ºç‚¹èµåŠŸèƒ½æ­£å¸¸

---

#### T13: åˆ›å»ºè¯„è®ºä¸¾æŠ¥æœåŠ¡

**è¾“å…¥å¥‘çº¦:**
- `user_comment` å’Œ `user_comment_report` è¡¨ç»“æ„å·²å®šä¹‰ï¼ˆT2 å®Œæˆï¼‰
- ä¸¾æŠ¥ä¸šåŠ¡é€»è¾‘

**è¾“å‡ºå¥‘çº¦:**
- `libs/interaction/src/comment-report/` ç›®å½•ï¼ˆç‹¬ç«‹å­æ¨¡å—ï¼‰
  - `comment-report.constant.ts`
  - `comment-report.module.ts`
  - `comment-report.service.ts`
  - `index.ts`

**å®ç°çº¦æŸ:**
- æ”¯æŒä¸¾æŠ¥åˆ›å»º
- æ”¯æŒä¸¾æŠ¥å¤„ç†
- é˜²æ­¢é‡å¤ä¸¾æŠ¥
- **ä»…ä¾èµ–æ•°æ®åº“è¡¨ç»“æ„ï¼Œä¸ä¾èµ– CommentService çš„ä¸šåŠ¡é€»è¾‘**
- **è¯„è®ºä¸¾æŠ¥ä½œä¸ºç‹¬ç«‹å­æ¨¡å—ï¼Œå‚è€ƒ `libs/forum/report/` ç»“æ„**

**ä¾èµ–å…³ç³»:**
- **å‰ç½®ä¾èµ–:** T2ï¼ˆæ•°æ®æ¨¡å‹ï¼‰
- **å¹¶è¡Œä»»åŠ¡:** T8-T12, T14
- **åç½®ä»»åŠ¡:** T15

**éªŒæ”¶æ ‡å‡†:**
- ä¸¾æŠ¥åŠŸèƒ½æ­£å¸¸
- å¤„ç†æµç¨‹æ­£ç¡®

---

#### T14: åˆ›å»ºä¸‹è½½æœåŠ¡

**è¾“å…¥å¥‘çº¦:**
- BaseInteractionService åŸºç±»
- ä¸‹è½½ä¸šåŠ¡é€»è¾‘

**è¾“å‡ºå¥‘çº¦:**
- `libs/interaction/src/download/` ç›®å½•
  - `download.constant.ts`
  - `download.module.ts`
  - `download.service.ts`
  - `index.ts`

**å®ç°çº¦æŸ:**
- æ”¯æŒä¸‹è½½æƒé™æ ¡éªŒ
- **æ”¯æŒä½œå“ä¸‹è½½å’Œç« èŠ‚ä¸‹è½½ï¼ˆtargetType: 1=æ¼«ç”», 2=å°è¯´, 3=æ¼«ç”»ç« èŠ‚, 4=å°è¯´ç« èŠ‚ï¼‰**
- **è®°å½• targetIdã€workId å’Œ workType å­—æ®µ**
- **ä¸ä½¿ç”¨ metadata å­—æ®µ**

**éªŒæ”¶æ ‡å‡†:**
- ä¸‹è½½è®°å½•åŠŸèƒ½æ­£å¸¸
- æ­£ç¡®è®°å½•ä½œå“ç±»å‹
- æ”¯æŒä½œå“å’Œç« èŠ‚ä¸¤ç§ä¸‹è½½ç±»å‹

---

### Phase 5: æ¨¡å—é›†æˆ

#### T15: åˆ›å»º InteractionModule

**è¾“å…¥å¥‘çº¦:**
- æ‰€æœ‰æœåŠ¡ç»„ä»¶
- NestJS æ¨¡å—è§„èŒƒ

**è¾“å‡ºå¥‘çº¦:**
- `libs/interaction/src/interaction.module.ts`
- æ›´æ–° `libs/interaction/src/index.ts`

**å®ç°çº¦æŸ:**
- æ­£ç¡®é…ç½®ä¾èµ–æ³¨å…¥
- å¯¼å‡ºæ‰€æœ‰å…¬å…±æœåŠ¡

**éªŒæ”¶æ ‡å‡†:**
- æ¨¡å—å¯è¢«æ­£ç¡®å¯¼å…¥
- ä¾èµ–æ³¨å…¥æ­£ç¡®

---

#### T17: æ›´æ–° ContentModule é›†æˆ

**è¾“å…¥å¥‘çº¦:**
- InteractionModule
- ContentModule ç°æœ‰ä»£ç 

**è¾“å‡ºå¥‘çº¦:**
- æ›´æ–°åçš„ ContentModule
- æ›´æ–°åçš„ WorkService
- æ›´æ–°åçš„ WorkChapterService
- æ›´æ–°åçš„ WorkCommentService
- **å…¨æ–°çš„ Controller å’Œ DTOï¼ˆä¸éœ€è¦å‘åå…¼å®¹ï¼‰**

**å®ç°çº¦æŸ:**
- ä½¿ç”¨æ–°çš„äº¤äº’æœåŠ¡
- **å®Œå…¨ä¸éœ€è¦å‘åå…¼å®¹ï¼Œå¯ä»¥é‡æ–°è®¾è®¡ API æ¥å£**
- ç§»é™¤æ—§çš„äº¤äº’é€»è¾‘
- **åŒºåˆ†æ¼«ç”»å’Œå°è¯´ç±»å‹**
- **è¯„è®ºåŠŸèƒ½æ”¯æŒæ¼«ç”»ã€æ¼«ç”»ç« èŠ‚ã€å°è¯´ã€å°è¯´ç« èŠ‚**

**éªŒæ”¶æ ‡å‡†:**
- ContentModule åŠŸèƒ½æ­£å¸¸
- ä½¿ç”¨æ–°çš„ DTO å’Œ Controller
- è¯„è®ºåŠŸèƒ½æ”¯æŒå®Œæ•´

---

#### T18: æ›´æ–° ForumModule é›†æˆ

**è¾“å…¥å¥‘çº¦:**
- InteractionModule
- ForumModule ç°æœ‰ä»£ç 

**è¾“å‡ºå¥‘çº¦:**
- æ›´æ–°åçš„ ForumModule
- æ›´æ–°åçš„ ForumTopicService
- æ›´æ–°åçš„ ForumReplyService
- åˆ é™¤ ForumTopicLikeService
- åˆ é™¤ ForumTopicFavoriteService
- åˆ é™¤ ForumViewService
- **å…¨æ–°çš„ Controller å’Œ DTOï¼ˆä¸éœ€è¦å‘åå…¼å®¹ï¼‰**

**å®ç°çº¦æŸ:**
- ä½¿ç”¨æ–°çš„äº¤äº’æœåŠ¡
- **å®Œå…¨ä¸éœ€è¦å‘åå…¼å®¹ï¼Œå¯ä»¥é‡æ–°è®¾è®¡ API æ¥å£**
- ç§»é™¤æ—§çš„äº¤äº’é€»è¾‘
- **è®ºå›å›å¤ä½œä¸ºè¯„è®ºå¤„ç†ï¼ˆtargetType=5ï¼‰**

**éªŒæ”¶æ ‡å‡†:**
- ForumModule åŠŸèƒ½æ­£å¸¸
- ä½¿ç”¨æ–°çš„ DTO å’Œ Controller
- è®ºå›å›å¤æ­£ç¡®æ˜ å°„åˆ°è¯„è®ºè¡¨

---

#### T19: åˆ é™¤æ—§è¡¨å’Œæ—§æœåŠ¡

**è¾“å…¥å¥‘çº¦:**
- è¿ç§»å®Œæˆç¡®è®¤
- æ—§ä»£ç æ¸…ç†åˆ—è¡¨

**è¾“å‡ºå¥‘çº¦:**
- åˆ é™¤æ—§çš„ Prisma æ¨¡å‹æ–‡ä»¶
- åˆ é™¤æ—§çš„æœåŠ¡æ–‡ä»¶
- æ›´æ–° prisma schema

**å®ç°çº¦æŸ:**
- ç¡®è®¤è¿ç§»å®Œæˆåæ‰§è¡Œ
- æ›´æ–°æ‰€æœ‰å¼•ç”¨

**éªŒæ”¶æ ‡å‡†:**
- æ— æ—§ä»£ç æ®‹ç•™
- ç¼–è¯‘é€šè¿‡

---

### Phase 6: éªŒè¯æµ‹è¯•

#### T20: ç¼–å†™å•å…ƒæµ‹è¯•

**è¾“å…¥å¥‘çº¦:**
- æœåŠ¡å®ç°ä»£ç 
- æµ‹è¯•æ¡†æ¶é…ç½®

**è¾“å‡ºå¥‘çº¦:**
- `libs/interaction/src/**/*.spec.ts`

**å®ç°çº¦æŸ:**
- è¦†ç›–æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
- Mock å¤–éƒ¨ä¾èµ–
- **æµ‹è¯•è¯„è®ºåŠŸèƒ½å¯¹äº”ç§ç›®æ ‡ç±»å‹çš„æ”¯æŒ**

**éªŒæ”¶æ ‡å‡†:**
- æµ‹è¯•è¦†ç›–ç‡ > 80%
- è¯„è®ºåŠŸèƒ½æµ‹è¯•è¦†ç›–æ‰€æœ‰ç›®æ ‡ç±»å‹

---

#### T21: ç¼–å†™é›†æˆæµ‹è¯•

**è¾“å…¥å¥‘çº¦:**
- æ¨¡å—é›†æˆä»£ç 
- æµ‹è¯•æ•°æ®åº“

**è¾“å‡ºå¥‘çº¦:**
- `test/interaction/*.e2e-spec.ts`

**å®ç°çº¦æŸ:**
- æµ‹è¯•å®Œæ•´æµç¨‹
- ä½¿ç”¨æµ‹è¯•æ•°æ®åº“
- **æµ‹è¯•è¯„è®ºåŠŸèƒ½åœ¨æ¼«ç”»ã€æ¼«ç”»ç« èŠ‚ã€å°è¯´ã€å°è¯´ç« èŠ‚ã€è®ºå›åœºæ™¯ä¸‹çš„è¡¨ç°**

**éªŒæ”¶æ ‡å‡†:**
- æ‰€æœ‰æµ‹è¯•é€šè¿‡
- è¯„è®ºåŠŸèƒ½å„åœºæ™¯æµ‹è¯•é€šè¿‡

---

#### T23: éªŒè¯åŠŸèƒ½å®Œæ•´æ€§

**è¾“å…¥å¥‘çº¦:**
- è¿ç§»åçš„ç³»ç»Ÿ
- åŠŸèƒ½æµ‹è¯•ç”¨ä¾‹

**è¾“å‡ºå¥‘çº¦:**
- åŠŸèƒ½æµ‹è¯•æŠ¥å‘Š
- æ€§èƒ½æµ‹è¯•æŠ¥å‘Š

**å®ç°çº¦æŸ:**
- æµ‹è¯•æ‰€æœ‰äº¤äº’åŠŸèƒ½
- å¯¹æ¯”è¿ç§»å‰åæ€§èƒ½
- **éªŒè¯è¯„è®ºåŠŸèƒ½åœ¨æ¼«ç”»ã€æ¼«ç”»ç« èŠ‚ã€å°è¯´ã€å°è¯´ç« èŠ‚ã€è®ºå›äº”ç§åœºæ™¯ä¸‹çš„å®Œæ•´æ€§**

**éªŒæ”¶æ ‡å‡†:**
- æ‰€æœ‰åŠŸèƒ½æ­£å¸¸
- æ€§èƒ½æ— æ˜æ˜¾ä¸‹é™
- è¯„è®ºåŠŸèƒ½åœ¨æ‰€æœ‰ç›®æ ‡ç±»å‹ä¸Šæ­£å¸¸å·¥ä½œ

---

## äº”ã€ä»»åŠ¡ä¼˜å…ˆçº§

| ä¼˜å…ˆçº§ | ä»»åŠ¡ | åŸå›  |
|--------|------|------|
| **P0ï¼ˆé˜»å¡ï¼‰** | T2, T16, T22 | æ•°æ®åº“å®šä¹‰å’Œè¿ç§»ï¼Œå¿…é¡»æœ€å…ˆå®Œæˆ |
| **P0ï¼ˆé˜»å¡ï¼‰** | T24 | ç§å­æ–‡ä»¶æ”¹é€ ï¼Œæ•°æ®åº“è¿ç§»æˆåŠŸåè¿›è¡Œ |
| P1 | T1-T4 | åŸºç¡€è®¾æ–½ï¼Œå…¶ä»–ä»»åŠ¡ä¾èµ– |
| P1 | T5-T7 | æ ¸å¿ƒæŠ½è±¡ï¼ŒæœåŠ¡ä¾èµ– |
| P2 | T8-T14 | ä¸šåŠ¡æœåŠ¡ï¼Œå¯å¹¶è¡Œå¼€å‘ |
| P2 | T15 | æ¨¡å—é›†æˆ |
| P3 | T17-T19 | é›†æˆè¿ç§» |
| P3 | T20-T23 | æµ‹è¯•éªŒè¯ |

## å…­ã€é£é™©ä»»åŠ¡

| ä»»åŠ¡ | é£é™© | ç¼“è§£æªæ–½ |
|------|------|----------|
| T2 | æ•°æ®æ¨¡å‹è®¾è®¡é”™è¯¯ | ä»”ç»†å®¡æŸ¥ CONSENSUS æ–‡æ¡£ï¼Œä¸ç°æœ‰è¡¨ç»“æ„å¯¹æ¯” |
| T16 | æ•°æ®è¿ç§»ä¸¢å¤± | å¤‡ä»½ + æ ¡éªŒ + å›æ»šè„šæœ¬ |
| T22 | æ•°æ®åº“è¿ç§»å¤±è´¥ | åˆ†æ­¥éªŒè¯ï¼Œç¡®ä¿æ¨¡å‹å®šä¹‰æ­£ç¡® |
| T24 | ç§å­æ–‡ä»¶ä¸å…¼å®¹ | éªŒè¯ç§å­æ•°æ®ä¸æ¨¡å‹ç»“æ„ä¸€è‡´ |
| T17-T18 | ä¸šåŠ¡é€»è¾‘é—æ¼ | è¯¦ç»†æµ‹è¯•ç”¨ä¾‹ |
| T19 | å¼•ç”¨é—æ¼ | å…¨å±€æœç´¢ + ç¼–è¯‘æ£€æŸ¥ |

## ä¸ƒã€å¼€å‘è§„èŒƒçº¦æŸ

### TypeScript ç±»å‹å®šä¹‰

**ç±»å‹æ¨å¯¼ä¼˜å…ˆåŸåˆ™ï¼š**
- æ‰€æœ‰å¯é€šè¿‡ç¼–è¯‘å™¨è‡ªåŠ¨æ¨å¯¼çš„ç±»å‹**ç¦æ­¢æ‰‹åŠ¨æ˜¾å¼å®šä¹‰**
- ä»…åœ¨ç±»å‹æ— æ³•æ¨å¯¼æˆ–éœ€æ˜ç¡®æ¥å£å¥‘çº¦æ—¶æ‰å…è®¸æ‰‹åŠ¨å®šä¹‰

### æ³¨é‡Šè§„èŒƒ

**å¤æ‚é€»è¾‘å¿…é¡»æ·»åŠ è¯¦ç»†æ³¨é‡Šï¼š**
- å¤æ‚ä¸šåŠ¡é€»è¾‘ï¼šè¯´æ˜è®¾è®¡æ€è·¯
- ç®—æ³•å®ç°ï¼šè¯´æ˜åŸç†å’Œå¤æ‚åº¦
- äº‹åŠ¡å¤„ç†ï¼šè¯´æ˜è¾¹ç•Œå’Œå›æ»šæ¡ä»¶
- è¾¹ç•Œæƒ…å†µï¼šè¯´æ˜æ½œåœ¨é—®é¢˜

### æ•°æ®åº“æ“ä½œè§„èŒƒ

**å¿…é¡»ä½¿ç”¨é¡¹ç›®è‡ªå®šä¹‰ Prisma æ’ä»¶ï¼š**

| åŠŸèƒ½ | ä½¿ç”¨æ–¹æ³• | ç¦æ­¢ä½¿ç”¨ |
|------|----------|----------|
| åˆ†é¡µæŸ¥è¯¢ | `findPagination()` | åŸç”Ÿ `skip` + `take` |
| è½¯åˆ é™¤ | `softDelete()` | æ‰‹åŠ¨è®¾ç½® `deletedAt` |
| å­˜åœ¨æ€§æ£€æŸ¥ | `exists()` | `count() > 0` |

## å…«ã€æ—§ä»£ç æ¸…ç†æ¸…å•

### Forum æ¨¡å—éœ€åˆ é™¤çš„æ–‡ä»¶

| ç›®å½• | æ–‡ä»¶ | è¯´æ˜ |
|------|------|------|
| `libs/forum/src/topic-like/` | å…¨éƒ¨ | è®ºå›ä¸»é¢˜ç‚¹èµï¼ˆå·²è¿ç§»è‡³ InteractionModuleï¼‰ |
| `libs/forum/src/topic-favorite/` | å…¨éƒ¨ | è®ºå›ä¸»é¢˜æ”¶è—ï¼ˆå·²è¿ç§»è‡³ InteractionModuleï¼‰ |
| `libs/forum/src/view/` | å…¨éƒ¨ | è®ºå›æµè§ˆè®°å½•ï¼ˆå·²è¿ç§»è‡³ InteractionModuleï¼‰ |
| `libs/forum/src/reply-like/` | å…¨éƒ¨ | è®ºå›å›å¤ç‚¹èµï¼ˆå·²è¿ç§»è‡³ InteractionModuleï¼‰ |
| `libs/forum/src/reply/` | äº¤äº’é€»è¾‘éƒ¨åˆ† | è®ºå›å›å¤ï¼ˆè¯„è®ºé€»è¾‘å·²è¿ç§»ï¼‰ |

### Content æ¨¡å—éœ€åˆ é™¤çš„æ–‡ä»¶

| ç›®å½• | æ–‡ä»¶ | è¯´æ˜ |
|------|------|------|
| `libs/content/src/work/core/` | ç‚¹èµ/æ”¶è—é€»è¾‘ | ä½œå“ç‚¹èµæ”¶è—ï¼ˆå·²è¿ç§»è‡³ InteractionModuleï¼‰ |
| `libs/content/src/work/chapter/` | ä¸‹è½½é€»è¾‘ | ç« èŠ‚ä¸‹è½½ï¼ˆå·²è¿ç§»è‡³ InteractionModuleï¼‰ |
| `libs/content/src/work/comment/` | å…¨éƒ¨ | ä½œå“è¯„è®ºï¼ˆå·²è¿ç§»è‡³ InteractionModuleï¼‰ |

### Prisma æ¨¡å‹éœ€åˆ é™¤çš„æ–‡ä»¶

| ç›®å½• | æ–‡ä»¶ | è¯´æ˜ |
|------|------|------|
| `prisma/models/work/` | `work-like.prisma` | ä½œå“ç‚¹èµè¡¨ |
| `prisma/models/work/` | `work-chapter-like.prisma` | ç« èŠ‚ç‚¹èµè¡¨ |
| `prisma/models/work/` | `work-favorite.prisma` | ä½œå“æ”¶è—è¡¨ |
| `prisma/models/work/` | `work-comment.prisma` | ä½œå“è¯„è®ºè¡¨ |
| `prisma/models/work/` | `work-comment-report.prisma` | è¯„è®ºä¸¾æŠ¥è¡¨ |
| `prisma/models/work/` | `work-chapter-download.prisma` | ç« èŠ‚ä¸‹è½½è¡¨ |
| `prisma/models/forum/` | `forum-topic-like.prisma` | è®ºå›ä¸»é¢˜ç‚¹èµè¡¨ |
| `prisma/models/forum/` | `forum-topic-favorite.prisma` | è®ºå›ä¸»é¢˜æ”¶è—è¡¨ |
| `prisma/models/forum/` | `forum-view.prisma` | è®ºå›æµè§ˆè®°å½•è¡¨ |
| `prisma/models/forum/` | `forum-reply-like.prisma` | è®ºå›å›å¤ç‚¹èµè¡¨ |
| `prisma/models/forum/` | `forum-reply.prisma` | è®ºå›å›å¤è¡¨ |

### æ¥å…¥æ–°æ¨¡å—ç¤ºä¾‹

```typescript
// libs/forum/src/forum.module.ts
import { InteractionModule } from '@libs/interaction'

@Module({
  imports: [
    InteractionModule, // æ–°å¢ï¼šäº¤äº’æ¨¡å—
    // ä»¥ä¸‹æ¨¡å—å°†åœ¨è¿ç§»å®Œæˆåç§»é™¤ï¼š
    // ForumTopicLikeModule,
    // ForumTopicFavoriteModule,
    // ForumViewModule,
    // ForumReplyLikeModule,
    // ForumReplyModule,
  ],
  exports: [
    InteractionModule,
  ],
})
export class ForumModule {}
```

```typescript
// libs/content/src/work/work.module.ts
import { InteractionModule } from '@libs/interaction'

@Module({
  imports: [
    InteractionModule, // æ–°å¢ï¼šäº¤äº’æ¨¡å—
    // ä»¥ä¸‹æ¨¡å—å°†åœ¨è¿ç§»å®Œæˆåç§»é™¤ï¼š
    // WorkCommentModule,
  ],
  exports: [
    InteractionModule,
  ],
})
export class WorkModule {}
```
