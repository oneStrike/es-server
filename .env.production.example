# ========================================
# Docker Compose 环境变量配置示例
# ========================================
# 使用说明：
# 1. 复制此文件为 .env：cp .env.production.example .env
# 2. 修改下方所有标记为 "必须修改" 的值
# 3. 确保 .env 文件不被提交到代码仓库
# ========================================

# ========================================
# 应用配置
# ========================================
NODE_ENV=production
APP_PORT=3000

# ========================================
# PostgreSQL 数据库配置
# ========================================
POSTGRES_DB=akaiito
POSTGRES_USER=postgres
POSTGRES_PASSWORD=changeme_strong_password_here  # 必须修改！使用强密码
POSTGRES_PORT=5432

# ========================================
# Redis 配置
# ========================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=                                   # 可选，建议设置强密码
REDIS_DB=0

# ========================================
# JWT 配置（必须修改！）
# ========================================
# 生成随机密钥命令: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"

# Admin JWT 密钥
ADMIN_JWT_SECRET=your_admin_jwt_secret_here                      # 必须修改！
ADMIN_JWT_REFRESH_SECRET=your_admin_jwt_refresh_secret_here      # 必须修改！

# Client JWT 密钥
CLIENT_JWT_SECRET=your_client_jwt_secret_here                    # 必须修改！
CLIENT_JWT_REFRESH_SECRET=your_client_jwt_refresh_secret_here    # 必须修改！

# ========================================
# RSA 密钥路径（容器内路径）
# ========================================
# 在宿主机上创建 ./rsa 目录并放置密钥文件
ADMIN_RSA_PRIVATE_KEY_PATH=/app/secrets/admin_private.key
ADMIN_RSA_PUBLIC_KEY_PATH=/app/secrets/admin_public.key
CLIENT_RSA_PRIVATE_KEY_PATH=/app/secrets/client_private.key
CLIENT_RSA_PUBLIC_KEY_PATH=/app/secrets/client_public.key

# ========================================
# 日志配置
# ========================================
LOG_LEVEL=info                    # 可选值: error, warn, info, debug
LOG_DIR=/app/logs
LOG_MAX_FILES=30d                 # 日志保留时间
LOG_MAX_SIZE=100m                 # 单个日志文件最大大小
LOG_DATE_PATTERN=YYYY-MM-DD       # 日志文件日期格式
LOG_REQUEST_DETAIL=false          # 是否打印请求头详情（生产环境建议 false）
LOG_RESPONSE_SIZE=false           # 是否打印响应体大小（生产环境建议 false）

# ========================================
# 文件上传配置
# ========================================
UPLOAD_DIR=/app/uploads

# ========================================
# Nginx 配置（使用 Nginx 时需要）
# ========================================
NGINX_HTTP_PORT=80
NGINX_HTTPS_PORT=443
